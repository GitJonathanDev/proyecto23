import{p as f}from"./plantillanavcliente-RjW_wxKy.js";import{V as v}from"./VisitaFooter-fQvL4C6g.js";import{C as k,s as u,e as n,b,a as t,F as g,h as p,g as l,t as r,f as C,o as i}from"./app-C6Ljm75g.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                     */const P={components:{plantillanavcliente:f,VisitaFooter:v},data(){return{isCartModalOpen:!1,productos:[],carrito:[]}},computed:{totalCarrito(){return this.carrito.reduce((s,o)=>s+o.precio*o.cantidad,0)}},methods:{mostrarProductos(){k.get(route("venta.obtenerProductos")).then(s=>{this.productos=s.data})},redirigirCompra(){const s=this.carrito.map(o=>`${o.codProducto}:${o.cantidad}`).join(",");window.location.href=route("comprar.detalle",{idsYCantidades:s})},toggleCartModal(){this.isCartModalOpen=!this.isCartModalOpen},agregarAlCarrito(s){const o=this.carrito.find(m=>m.codProducto===s.codProducto);o?o.cantidad<s.stock?o.cantidad++:alert("No hay suficiente stock para agregar más unidades."):this.carrito.push({...s,cantidad:1}),this.$forceUpdate()},incrementarCantidad(s){s.cantidad<s.stock&&s.cantidad++},decrementarCantidad(s){s.cantidad>1&&s.cantidad--},eliminarDelCarrito(s){this.carrito=this.carrito.filter(o=>o.codProducto!==s.codProducto)}},mounted(){this.mostrarProductos()}},M={class:"container mt-3 mb-12"},x={class:"row",id:"productosContainer"},N={class:"card position-relative"},V={key:0,class:"agotado-overlay"},w=["src"],B={class:"card-body"},A=["onClick","disabled"],F={key:0,class:"modal-overlay"},D={class:"modal-content"},E={class:"modal-header modal-title bg-danger text-white"},O={class:"modal-body"},T={class:"table table-bordered table-full-width"},S={class:"table-item"},j={class:"table-item"},z=["onClick","disabled"],q={class:"mx-2"},I=["onClick","disabled"],L={class:"table-item"},R={class:"table-item"},U=["onClick"],Y={class:"total-container text-right mt-3"},G={class:"total-price"},H={class:"modal-footer justify-content-end"};function J(s,o,m,K,d,e){const _=u("plantillanavcliente"),h=u("VisitaFooter");return i(),n("div",null,[b(_,{"cart-item-count":d.carrito.length,onToggleCartModal:e.toggleCartModal,userName:s.$page.props.auth.user.name},null,8,["cart-item-count","onToggleCartModal","userName"]),t("div",M,[o[10]||(o[10]=t("div",{class:"col-12 text-center"},[t("h2",{class:"font-weight-bold mb-4",style:{"font-size":"2rem"}},[t("em",null,"¡Encuentra todo lo que necesitas para tu entrenamiento!")])],-1)),t("div",x,[(i(!0),n(g,null,p(d.productos,a=>(i(),n("div",{key:a.codProducto,class:"col-md-4 mb-4"},[t("div",N,[a.stock<=0?(i(),n("div",V,"Agotado")):C("",!0),t("img",{src:a.imagen_url?`/storage/uploads/${a.imagen_url}`:"https://via.placeholder.com/300",class:"card-img-top",alt:"Producto"},null,8,w),t("div",B,[t("h5",null,[o[2]||(o[2]=t("strong",null,"Nombre: ",-1)),l(r(a.nombre),1)]),t("p",null,[o[3]||(o[3]=t("strong",null,"Descripción: ",-1)),l(r(a.descripcion),1)]),t("p",null,[o[4]||(o[4]=t("strong",null,"Precio: ",-1)),l(" "+r(a.precio)+" Bs.",1)]),t("p",null,[o[5]||(o[5]=t("strong",null,"Stock: ",-1)),l(" "+r(a.stock),1)]),t("button",{onClick:c=>e.agregarAlCarrito(a),disabled:a.stock===0,class:"btn btn-primary btn-block mt-5"},r(a.stock>0?"Agregar al carrito":"Sin stock"),9,A)])])]))),128))]),d.isCartModalOpen?(i(),n("div",F,[t("div",D,[t("div",E,[o[6]||(o[6]=t("h5",{class:"m-0 namecar"},"Carrito de Compras",-1)),t("button",{type:"button",onClick:o[0]||(o[0]=(...a)=>e.toggleCartModal&&e.toggleCartModal(...a)),class:"close text-white"},"×")]),t("div",O,[t("table",T,[o[7]||(o[7]=t("thead",null,[t("tr",null,[t("th",null,"Nombre del Producto"),t("th",null,"Cantidad"),t("th",null,"Precio"),t("th",null,"Acciones")])],-1)),t("tbody",null,[(i(!0),n(g,null,p(d.carrito,a=>(i(),n("tr",{key:a.codProducto},[t("td",S,r(a.nombre),1),t("td",j,[t("button",{onClick:c=>e.decrementarCantidad(a),disabled:a.cantidad===1,class:"btn btn-sm btn-secondary ff"},"-",8,z),t("span",q,r(a.cantidad),1),t("button",{onClick:c=>e.incrementarCantidad(a),disabled:a.cantidad>=a.stock,class:"btn btn-sm btn-secondary ff"},"+",8,I)]),t("td",L,r(a.precio*a.cantidad)+" Bs.",1),t("td",R,[t("button",{onClick:c=>e.eliminarDelCarrito(a),class:"btn btn-sm btn-primary"},"Eliminar",8,U)])]))),128))])]),t("div",Y,[o[8]||(o[8]=t("strong",{class:"ee"},"Total:",-1)),o[9]||(o[9]=l()),t("span",G,r(e.totalCarrito)+" Bs.",1)])]),t("div",H,[t("button",{class:"btn btn-primary",onClick:o[1]||(o[1]=(...a)=>e.redirigirCompra&&e.redirigirCompra(...a))}," Realizar Compra ")])])])):C("",!0)]),b(h)])}const tt=y(P,[["render",J],["__scopeId","data-v-d71b7f73"]]);export{tt as default};
