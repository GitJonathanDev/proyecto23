import{T as U,d as M,q as B,s as I,e as i,b as s,w as g,F as v,o as l,a as o,u as a,h as N,t as E,f as c,i as T,k as D,z as j,v as O,g as L,x as R}from"./app-C6Ljm75g.js";import{_ as b}from"./InputError-DNwQAqX2.js";import{_ as m}from"./InputLabel-B9Ydpcgw.js";import{_ as P}from"./TextInput-CSJ5jCkD.js";import{_ as z}from"./PrimaryButton-DXw7G3WG.js";import{p as G}from"./plantillanav-IzOOFMsV.js";import{V as H}from"./VisitaFooter-fQvL4C6g.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                     */const K={class:"py-12"},Q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},W={class:"overflow-hidden shadow-xl sm:rounded-lg divgrande"},X={class:"p-6 lg:p-8 border-gray-200 divpequeno"},Y={key:0,class:"alert alert-danger"},Z={class:"mb-4"},ee={key:0,class:"text-red-500 text-sm dd"},oe={class:"mb-4"},te={key:0,class:"text-red-500 text-sm dd"},se={class:"mb-4"},ae={key:0,class:"text-red-500 text-sm dd"},re={class:"mb-4"},ie=["value"],le={key:0,class:"text-red-500 text-sm dd"},de={class:"mb-4"},ne=["src"],ce={class:"mb-4"},me={key:0},ue=["src"],pe={key:1,class:"text-gray-500"},ge={class:"text-center mt-4"},be={__name:"Edit",props:{producto:Object,categorias:Array,errors:Object},setup(q){var k,F,w,V;const n=q,e=U({nombre:((k=n.producto)==null?void 0:k.nombre)||"",descripcion:((F=n.producto)==null?void 0:F.descripcion)||"",precio:((w=n.producto)==null?void 0:w.precio)||"",codCategoriaF:((V=n.producto)==null?void 0:V.codCategoriaF)||"",imagen:null}),u=M(null),A=d=>{const t=d.target.files[0];if(t){const p=new FileReader;p.onload=f=>{u.value=f.target.result},p.readAsDataURL(t)}else u.value=null},h=()=>e.nombre.length>2&&e.nombre.length<101,x=()=>e.descripcion.length>4&&e.descripcion.length<256,y=()=>parseFloat(e.precio)>0,C=()=>e.codCategoriaF!=="",_=()=>h()&&x()&&y()&&C();B([()=>e.nombre,()=>e.descripcion,()=>e.precio,()=>e.codCategoriaF],_);const S=()=>{const d=new FormData;d.append("nombre",e.nombre),d.append("descripcion",e.descripcion),d.append("precio",e.precio),d.append("codCategoriaF",e.codCategoriaF),e.imagen&&d.append("imagen",e.imagen),e.put(route("producto.update",n.producto.codProducto),{data:d,onSuccess:()=>{R.get(route("producto.index"))}})};return(d,t)=>{const p=I("Link"),f=I("AppLayout");return l(),i(v,null,[s(G,{userName:d.$page.props.auth.user.name},null,8,["userName"]),s(f,{title:"Editar Producto"},{header:g(()=>t[4]||(t[4]=[o("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Editar Producto ",-1)])),default:g(()=>[o("div",K,[o("div",Q,[o("div",W,[o("div",X,[t[8]||(t[8]=o("h1",{class:"text-2xl font-bold text-center mb-6"},"Editar Producto",-1)),a(e).errors.length?(l(),i("div",Y,[o("ul",null,[(l(!0),i(v,null,N(a(e).errors,(r,$)=>(l(),i("li",{key:$},E(r),1))),128))])])):c("",!0),o("form",{onSubmit:T(S,["prevent"]),novalidate:""},[o("div",Z,[s(m,{for:"nombre",value:"Nombre",class:"bb"}),s(b,{message:a(e).errors.nombre},null,8,["message"]),s(P,{modelValue:a(e).nombre,"onUpdate:modelValue":t[0]||(t[0]=r=>a(e).nombre=r),id:"nombre",class:"mt-1 block w-full cc",placeholder:"Ingrese el nombre del producto",required:"",onInput:_},null,8,["modelValue"]),h()?c("",!0):(l(),i("div",ee," * El nombre debe tener entre 3 y 100 caracteres. "))]),o("div",oe,[s(m,{for:"descripcion",value:"Descripción",class:"bb"}),s(b,{message:a(e).errors.descripcion},null,8,["message"]),D(o("textarea",{"onUpdate:modelValue":t[1]||(t[1]=r=>a(e).descripcion=r),id:"descripcion",class:"mt-1 block w-full cc",placeholder:"Ingrese la descripción del producto",rows:"3",required:""},null,512),[[j,a(e).descripcion]]),x()?c("",!0):(l(),i("div",te," * La descripción debe tener entre 5 y 255 caracteres. "))]),o("div",se,[s(m,{for:"precio",value:"Precio",class:"bb"}),s(b,{message:a(e).errors.precio},null,8,["message"]),s(P,{modelValue:a(e).precio,"onUpdate:modelValue":t[2]||(t[2]=r=>a(e).precio=r),type:"number",id:"precio",class:"mt-1 block w-full cc",placeholder:"Ingrese el precio del producto",required:""},null,8,["modelValue"]),y()?c("",!0):(l(),i("div",ae," * El precio debe ser un número mayor a 0. "))]),o("div",re,[s(m,{for:"codCategoriaF",value:"Categoría",class:"bb"}),s(b,{message:a(e).errors.codCategoriaF},null,8,["message"]),D(o("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>a(e).codCategoriaF=r),id:"codCategoriaF",class:"mt-1 block w-full cc",required:""},[t[5]||(t[5]=o("option",{value:""},"Seleccione una categoría",-1)),(l(!0),i(v,null,N(n.categorias,r=>(l(),i("option",{key:r.codCategoria,value:r.codCategoria},E(r.nombre),9,ie))),128))],512),[[O,a(e).codCategoriaF]]),C()?c("",!0):(l(),i("div",le," * Seleccione una categoría válida. "))]),o("div",de,[s(m,{for:"imagen",value:"Imagen",class:"bb"}),o("input",{type:"file",id:"imagen",class:"form-control",accept:"image/*",onChange:A},null,32),u.value?(l(),i("img",{key:0,src:u.value,alt:"Vista previa de la imagen",class:"img-fluid mt-2"},null,8,ne)):c("",!0)]),o("div",ce,[s(m,{value:"Imagen Actual",class:"bb"}),n.producto.imagen_url?(l(),i("div",me,[o("img",{src:`/storage/uploads/${n.producto.imagen_url}`,alt:"Imagen actual",width:"200"},null,8,ue)])):(l(),i("div",pe,"No hay imagen actual."))]),o("div",ge,[s(p,{href:d.route("producto.index"),class:"btn btn-secondary me-3"},{default:g(()=>t[6]||(t[6]=[o("i",{class:"fas fa-arrow-left"},null,-1),L(" Atrás ")])),_:1},8,["href"]),s(z,{class:"btn btn-primary",disabled:!_()||a(e).processing},{default:g(()=>t[7]||(t[7]=[o("i",{class:"fas fa-pencil-alt"},null,-1),L(" Modificar ")])),_:1},8,["disabled"])])],32)])])]),s(H)])]),_:1})],64)}}},we=J(be,[["__scopeId","data-v-d1dd8996"]]);export{we as default};
